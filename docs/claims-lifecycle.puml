@startuml Claims Lifecycle - Insurance System

!theme cerulean
skinparam backgroundColor #FEFEFE
skinparam roundcorner 10
skinparam defaultFontSize 11
skinparam titleFontSize 18
skinparam legendFontSize 10

title **Insurance Claims Lifecycle - Complete Workflow**\n(All Roles, All Claim Types, All Statuses)

|#LightBlue| Healthcare Providers |
|#LightGreen| Insurance Client |
|#LightYellow| Medical Admin |
|#LightCoral| Coordination Admin |
|#Lavender| Insurance Manager |

' ==================== LEGEND ====================
legend left
  **CLAIM TYPES:**
  â€¢ Doctor Claims (Consultations, Follow-ups)
  â€¢ Pharmacist Claims (Prescriptions)
  â€¢ Lab Technician Claims (Lab Tests)
  â€¢ Radiologist Claims (Radiology Services)
  â€¢ Client Claims (Out-of-Network)
  â€¢ Emergency Claims (Fast Track)

  **ROLES:**
  ğŸ©º Doctor, Pharmacist, Lab Tech, Radiologist
  ğŸ‘¤ Insurance Client (Patient)
  ğŸ¥ Medical Admin
  ğŸ“‹ Coordination Admin
  ğŸ‘” Insurance Manager (All Access)
endlegend

' ==================== START ====================
|Healthcare Providers|
start
:ğŸ©º **Healthcare Provider**
(Doctor/Pharmacist/Lab/Radiologist)
searches for patient;

fork
  :Search by Full Name;
fork again
  :Search by University ID;
end fork

:Select Patient or Family Member;

|Insurance Client|
:ğŸ‘¤ **OR** Insurance Client
submits self-service claim
(out-of-network provider);

|Healthcare Providers|
:Enter Claim Details:
â€¢ Service Description
â€¢ Diagnosis (if Doctor)
â€¢ Treatment Details
â€¢ Amount (â‚ª)
â€¢ Service Date
â€¢ Invoice Image (optional);

note right
  **Follow-Up Detection (Doctors Only)**
  If same patient + same specialization
  within 14 days â†’ Amount = â‚ª0
  (Insurance doesn't pay consultation)
end note

:Submit Claim;

' ==================== PENDING MEDICAL ====================
|Medical Admin|
#PaleGreen:ğŸ“¥ **PENDING_MEDICAL**
(New Claim Submitted);

note left
  **Notifications Sent:**
  â†’ All Medical Admins
  "New claim awaiting review"
end note

:ğŸ¥ **Medical Admin Reviews**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
**What They See:**
â€¢ Provider Name & Type
â€¢ Patient/Beneficiary Info
â€¢ Service Details & Amount
â€¢ Diagnosis & Treatment
â€¢ Invoice Documents
â€¢ Coverage Eligibility;

:ğŸ” **Coverage Engine Check:**
â€¢ Service covered by policy?
â€¢ Age/Gender restrictions?
â€¢ Deductible met?
â€¢ Within coverage limits?
â€¢ Emergency bypass eligible?;

if (Medical Decision?) then (âœ… Approve)
  :Record:
  â€¢ Reviewer Name
  â€¢ Review Timestamp
  â€¢ Coverage Details;

  #LightGreen:âœ… **APPROVED_BY_MEDICAL**;

  note right
    **Notifications:**
    â†’ Provider: "Medical approved"
    â†’ Patient: "Medical approved"
    â†’ Coordination Admins: "Ready for review"
  end note

else (âŒ Reject)
  :Enter Rejection Reason
  (Required);

  #Salmon:âŒ **REJECTED_FINAL**
  (TERMINAL);

  note left
    **Notifications:**
    â†’ Provider: "Rejected: [reason]"
    â†’ Patient: "Claim rejected"
  end note

  stop
endif

' ==================== COORDINATION REVIEW ====================
|Coordination Admin|
#LightYellow:ğŸ“‹ **AWAITING_COORDINATION_REVIEW**;

:ğŸ“‹ **Coordination Admin Reviews**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
**What They See:**
â€¢ All Medical Admin Info
â€¢ Medical Reviewer Details
â€¢ Coverage Calculation
â€¢ Insurance vs Client Amount
â€¢ Payment Details;

switch (Coordination Decision?)
case (âœ… Approve Final)
  :Calculate Final Payment:
  â€¢ Insurance Covered Amount
  â€¢ Client Pay Amount
  â€¢ Coverage % Applied;

  #LightGreen:âœ… **APPROVED_FINAL**;

  note right
    **Notifications:**
    â†’ Provider: "Final approval - Ready for payment"
    â†’ Patient: "Insurance will pay â‚ª[amount]"
  end note

case (âŒ Reject Final)
  :Enter Rejection Reason
  (Required);

  #Salmon:âŒ **REJECTED_FINAL**
  (TERMINAL);

  note left
    **Notifications:**
    â†’ Provider: "Rejected: [reason]"
    â†’ Patient: "Claim rejected"
  end note

  stop

case (ğŸ”™ Return to Medical)
  :Enter Return Reason;

  #Orange:ğŸ”™ **RETURNED_FOR_REVIEW**;

  note left
    **Notification:**
    â†’ Medical Admin: "Needs re-review"
  end note

  |Medical Admin|
  :ğŸ¥ Medical Admin
  Re-reviews Claim;

  if (Re-review Decision?) then (âœ… Approve)
    #LightGreen:âœ… **APPROVED_BY_MEDICAL**;
    |Coordination Admin|
    #LightYellow:ğŸ“‹ **AWAITING_COORDINATION_REVIEW**;
    backward:Continue Review;
  else (âŒ Reject)
    #Salmon:âŒ **REJECTED_FINAL**;
    stop
  endif

case (â†©ï¸ Return to Provider)
  :Enter Return Reason
  (e.g., Missing documents);

  #Orange:â†©ï¸ **RETURNED_TO_PROVIDER**;

  |Healthcare Providers|
  note right
    **Notification:**
    â†’ Provider: "Corrections needed"
  end note

  :Provider Makes Corrections
  and Resubmits;

  |Medical Admin|
  #PaleGreen:ğŸ“¥ **PENDING_MEDICAL**;
  backward:Start Review Again;

endswitch

' ==================== PAYMENT ====================
|Coordination Admin|
:ğŸ’³ **Payment Processing**;

if (Process Payment?) then (Mark as Paid)
  :Record:
  â€¢ Paid At Timestamp
  â€¢ Paid By (Admin ID);

  #LightGreen:ğŸ’³ **PAID**
  (TERMINAL - IRREVERSIBLE);

  note right
    **Final Notifications:**
    â†’ Provider: "â‚ª[amount] transferred"
    â†’ Patient: "Insurance paid â‚ª[amount]"
  end note

else (Hold)
  #LightYellow:â³ **PAYMENT_PENDING**;

  :Awaiting Payment
  Processing;
  backward:Process When Ready;
endif

' ==================== INSURANCE MANAGER ====================
|Insurance Manager|
note right
  **ğŸ‘” Insurance Manager**
  Has FULL ACCESS to ALL:
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  âœ“ View ALL claims (any status)
  âœ“ Approve/Reject at Medical level
  âœ“ Approve/Reject at Coordination level
  âœ“ Return claims to Medical/Provider
  âœ“ Mark claims as Paid
  âœ“ Create claims on behalf of clients
  âœ“ Generate reports (PDF, Excel)
  âœ“ Batch operations
  âœ“ Advanced filtering & search
end note

stop

@enduml
