@startuml Claims Status State Diagram

!theme plain
skinparam backgroundColor #FFFFFF
skinparam state {
  BackgroundColor<<initial>> #FFE0B2
  BackgroundColor<<medical>> #C8E6C9
  BackgroundColor<<coordination>> #BBDEFB
  BackgroundColor<<returned>> #FFE082
  BackgroundColor<<approved>> #81C784
  BackgroundColor<<rejected>> #EF9A9A
  BackgroundColor<<paid>> #4CAF50
  BorderColor Black
  FontSize 12
}

title **Claims Status State Machine**\nComplete Status Transitions

[*] --> PENDING_MEDICAL : Claim Submitted

state "ğŸ†• PENDING_MEDICAL" as PENDING_MEDICAL <<initial>> {
  state "Awaiting Medical Review" as pm_desc
}

state "Medical Admin Review" as MedicalReview <<choice>>

PENDING_MEDICAL --> MedicalReview : Medical Admin\nReviews

state "âœ… APPROVED_BY_MEDICAL" as APPROVED_MEDICAL <<medical>> {
  state "Coverage Verified" as am_desc
}

state "ğŸ“‹ AWAITING_COORDINATION_REVIEW" as AWAITING_COORD <<coordination>> {
  state "Awaiting Coordination Decision" as ac_desc
}

MedicalReview --> APPROVED_MEDICAL : âœ… Approve
MedicalReview --> REJECTED_FINAL : âŒ Reject\n(with reason)

APPROVED_MEDICAL --> AWAITING_COORD : Auto-transition

state "Coordination Admin Review" as CoordReview <<choice>>

AWAITING_COORD --> CoordReview : Coordination Admin\nReviews

state "ğŸ”™ RETURNED_FOR_REVIEW" as RETURNED_MEDICAL <<returned>> {
  state "Back to Medical Admin" as rm_desc
}

state "â†©ï¸ RETURNED_TO_PROVIDER" as RETURNED_PROVIDER <<returned>> {
  state "Corrections Needed" as rp_desc
}

state "âœ… APPROVED_FINAL" as APPROVED_FINAL <<approved>> {
  state "Ready for Payment" as af_desc
}

state "âŒ REJECTED_FINAL" as REJECTED_FINAL <<rejected>> {
  state "TERMINAL - No Recovery" as rf_desc
}

CoordReview --> APPROVED_FINAL : âœ… Approve Final
CoordReview --> REJECTED_FINAL : âŒ Reject Final\n(with reason)
CoordReview --> RETURNED_MEDICAL : ğŸ”™ Return to Medical\n(with reason)
CoordReview --> RETURNED_PROVIDER : â†©ï¸ Return to Provider\n(with reason)

state "Medical Re-Review" as MedicalReReview <<choice>>

RETURNED_MEDICAL --> MedicalReReview : Medical Admin\nRe-reviews

MedicalReReview --> APPROVED_MEDICAL : âœ… Re-approve
MedicalReReview --> REJECTED_FINAL : âŒ Re-reject

RETURNED_PROVIDER --> PENDING_MEDICAL : Provider\nResubmits

state "â³ PAYMENT_PENDING" as PAYMENT_PENDING <<approved>> {
  state "Awaiting Payment Processing" as pp_desc
}

APPROVED_FINAL --> PAYMENT_PENDING : Queue for\nPayment

state "ğŸ’³ PAID" as PAID <<paid>> {
  state "TERMINAL - Complete" as p_desc
}

PAYMENT_PENDING --> PAID : ğŸ’³ Mark as Paid\n(Coord/Manager)

REJECTED_FINAL --> [*] : Claim Closed\n(No Payment)
PAID --> [*] : Claim Complete\n(Payment Sent)

note right of PENDING_MEDICAL
  **Who Submits:**
  â€¢ Doctor
  â€¢ Pharmacist
  â€¢ Lab Technician
  â€¢ Radiologist
  â€¢ Insurance Client
end note

note right of MedicalReview
  **Medical Admin Checks:**
  â€¢ Service coverage
  â€¢ Age/Gender eligibility
  â€¢ Deductible requirements
  â€¢ Coverage limits
  â€¢ Emergency bypass
end note

note right of CoordReview
  **Coordination Admin Checks:**
  â€¢ Final approval authority
  â€¢ Payment calculation
  â€¢ Insurance vs Client amounts
  â€¢ Return if issues found
end note

note bottom of PAID
  **PAID is IRREVERSIBLE**
  Cannot be modified or
  returned once paid
end note

note bottom of REJECTED_FINAL
  **REJECTED is TERMINAL**
  Provider must submit
  a new claim if needed
end note

legend right
  **ğŸ”” NOTIFICATION TRIGGERS:**
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Submit â†’ Medical Admins
  Medical Approve â†’ Provider, Patient, Coord Admins
  Medical Reject â†’ Provider, Patient
  Coord Approve â†’ Provider, Patient
  Coord Reject â†’ Provider, Patient
  Return to Medical â†’ Medical Admin
  Return to Provider â†’ Provider
  Mark Paid â†’ Provider, Patient
endlegend

@enduml
